{% extends "base.html" %}
{% block content %}
 
  <h1>Oluterä</h1>

  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Oluen nimi</th>
        <th>Valmistuminen</th>
        <th>Erän koko</th>
        <th>Erästä vapaana</th>
        <th>Hinta</th>
      </tr>
    </thead>

    <tbody>
      {% if olutera %}
      <tr>
        <td>{{olutera.oluen_nimi}}</td>
        <td>{{olutera.valmistuminen}}</td>
        <td>{{olutera.eran_koko}} litraa</td>
        <td>{{olutera.vapaana}} litraa</td>
        <td>{{olutera.hinta}} €/litra</td>
      </tr>
      {% endif %}
    </tbody>
  </table>

  <br/>
  
  <h1>Tilauksen koostaminen</h1>
  
  <form method="post" action="{{base_path}}/tilaukset/uusi" oninput="
        {% for pakkaustyyppi in pakkaustyypit %}  
        resultPantti{{pakkaustyyppi.id}}.value=parseFloat(field{{pakkaustyyppi.id}}.value)*parseFloat({{pakkaustyyppi.pantti}});
        resultHinta{{pakkaustyyppi.id}}.value=parseFloat(field{{pakkaustyyppi.id}}.value)*parseFloat({{pakkaustyyppi.hinta}});
        resultOlut{{pakkaustyyppi.id}}.value=parseFloat(field{{pakkaustyyppi.id}}.value)*parseFloat({{olutera.hinta}})*parseFloat({{pakkaustyyppi.vetoisuus}});
        {% endfor %}
        ">
      
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Pakkaustyyppi</th>
        <th>Pantin hinta</th>
        <th>Pakkauksen hinta</th>
        <th>Vetoisuus</th>
        <th>Määrä</th>
        <th>Pantit yhteensä</th> 
        <th>Pakkaukset yhteensä</th>  
        <th>Olut yhteensä</th> 
      </tr>
    </thead>
    
    <tbody>
      {% for pakkaustyyppi in pakkaustyypit %}  
      <tr>
        <td>{{pakkaustyyppi.pakkaustyypin_nimi}}</td>
        <td>{{pakkaustyyppi.pantti}} €/kpl</td>
        <td>{{pakkaustyyppi.hinta}} €/kpl</td>
        <td>{{pakkaustyyppi.vetoisuus}} litraa</td>
        <td><input class="form-control" id="field{{pakkaustyyppi.id}}" value="0" type="number"></td>
        <td><output name="resultPantti{{pakkaustyyppi.id}}" for="field{{pakkaustyyppi.id}}"> €</output></td>
        <td><output name="resultHinta{{pakkaustyyppi.id}}" for="field{{pakkaustyyppi.id}}"> €</td> 
        <td><output name="resultOlut{{pakkaustyyppi.id}}" for="field{{pakkaustyyppi.id}}"> €</td>  
      </tr>
      {% endfor %}
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <!--RIVIN LOPPUSUMMA-->
        <td>0 €</td> 
        <td>0 €</td> 
        <td>0 €</td> 
      </tr>
    </tbody>
  </table>
   
  <!--LOPPUSUMMA-->
  <table class="table table-striped table-bordered">
    <tbody>
      <tr>
        <td>0 €</td>
      </tr>
      <tr>
        <td><button type="submit" name="order" value="set" class="btn btn-success">Lähetä tilaus</button></td>
      </tr>
    </tbody>
  </table>
  
  </form>
{% endblock %}