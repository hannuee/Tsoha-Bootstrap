{% extends "base.html" %}
{% block content %}
  <h1>Kaikki oluterät</h1>

  <table class="table table-striped table-bordered"> 
    <thead>
      <tr>
        <th>Oluen nimi</th>
        <th>Valmistuminen</th>
        <th>Erän koko</th>
        <th>Erästä vapaana</th>
        <th>Hinta</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <!--Työntekijälle näytetään tietenkin kaikki oluterät, myös loppuunmyydyt-->
    <tbody>
      {% for olutera in oluterat %}
      <tr>
        <td>{{olutera.oluen_nimi}}</td>
        <td>{{olutera.valmistuminen}}</td>
        <td>{{olutera.eran_koko}} litraa</td>
        <td>{{olutera.vapaana}} litraa</td>
        <td>{{olutera.hinta}} €/litra</td>
        <th><a class="btn btn-primary" href="{{base_path}}/hallinnointi/oluterat/{{olutera.id}}">Näytä tilaukset</a></th>
        <th><a class="btn btn-primary" href="#">Siirry tilaamaan</a></th>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
  <br/>


  <form method="post" action="{{base_path}}/hallinnointi/oluterat/uusi">
  <table class="table table-striped table-bordered"> 
    <tbody>
      <tr> 
  {% if attributes %}  <!--Virheellisen lomakkeen lähetyksen jälkeen täytetään lomake käyttäjän lähettämillä syötteillä-->
        <td><input name="oluen_nimi" class="form-control" value="{{attributes.oluen_nimi}}" type="text"></td>
        <td><input name="valmistuminen" class="form-control" value="{{attributes.valmistuminen}}" type="date"></td>
        <td><input name="eran_koko" class="form-control" value="{{attributes.eran_koko}}" type="text"></td>
        <td><input name="hinta" class="form-control" value="{{attributes.hinta}}" type="text"></td>
        <td><button type="submit" class="btn btn-primary">Luo oluterä!</button></td>
  {% else %} <!--Muuten uusi puhdas lomake-->
        <td><input name="oluen_nimi" class="form-control" placeholder="Oluen nimi" type="text"></td>
        <td><input name="valmistuminen" class="form-control" type="date"></td>
        <td><input name="eran_koko" class="form-control" placeholder="litraa" type="text"></td>
        <td><input name="hinta" class="form-control" placeholder="€/litra" type="text"></td>
        <td><button type="submit" class="btn btn-primary">Luo oluterä!</button></td>
  {% endif %}
        </tr>
    </tbody>
  </table>
  </form>
  
  
   {% if errors %}
    <div class="alert alert-danger">
      <ul>
        {% for error in errors %}
          <li>{{error}}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
  
  {% if message %}
    <div class="alert alert-success">
      {{message}}
    </div>
  {% endif %}

{% endblock %}